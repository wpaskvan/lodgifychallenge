@model PaginationViewModel<UserViewModel>

@{
    ViewData["Title"] = "User's list";
}

@{

    int nextPage = Model.Page + 1;
    int previousPage = Model.Page - 1;
    bool hasPreviousPage = Model.Page > 1;
    bool hasMorePages = Model.TotalPages >= nextPage;
}
<div class="row">
    <div class="col-2">
        <div class="form-group">
            <label class="d-inline-block" for="usersLenghtOptions">
                Page size
            </label>
            <select name="usersLengthOptions" id="usersLengthOptions" onchange="OnPageSizeClick()" aria-controls="Users Length" class="d-inline-block custom-select custom-select-sm form-control form-control-sm">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Created at</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var u in Model.Items)
                {
                    <tr>
                        <td>@u.Id</td>
                        <td><a class="page-link" href="/users/details?userId=@u.Id" aria-label="Previous Page">@u.FirstName @u.LastName</a></td>
                        <td>@u.Email</td>
                        <td>@u.CreatedAt</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <nav aria-label="Users Pagination">
            <ul class="pagination">
                <li class="page-item @(!hasPreviousPage ? "disabled" : string.Empty)">
                    <a class="page-link" onclick="OnPageItemClick('/users',@previousPage)" aria-label="Previous Page">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous Page</span>
                    </a>
                </li>

                @if (hasPreviousPage)
                {
                    <li class="page-item">
                        <a class="page-link" onclick="OnPageItemClick('/users', @previousPage)">@previousPage</a>
                    </li>
                }

                <li class="page-item active">
                    <a class="page-link" onclick="OnPageItemClick('/users',@Model.Page)">@Model.Page</a>
                </li>

                @if (hasMorePages)
                {
                    <li class="page-item">
                        <a class="page-link" onclick="OnPageItemClick('/users',@nextPage)">@nextPage</a>
                    </li>
                }

                <li class="page-item @(!hasMorePages ? "disabled" : string.Empty)">
                    <a class="page-link" onclick="OnPageItemClick('/users',@nextPage)" aria-label="Next Page">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next Page</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div>
@section Scripts {
    <script src="~/js/users.js" asp-append-version="true"></script>
}
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function (event) {
        SetPageSize(@Model.PageSize);
    });
</script>